<h2 class="highlight">Obecně o LaTeXu</h2>

<p>
  <a class="ref" href="https://www.latex-project.org/">LaTeX</a> je sada maker nad TeX-em –
  programem pro počítačovou sazbu původně vyvinutým Donaldem Knuthem. Jedná se
  už dlouhá léta o standard pro tvorbu seriózních dokumentů v technických
  oborem, jako je matematika či fyzika – a to z dobrých důvodů. Avšak původnímu
  TeXu je bezmála 50, LaTeX (ač je do současné doby aktualizován) na tom se
  svými téměr 40 není o moc lépe.
</p>

<p>
  Tato skutečnost těžce prokládá některé z problémů, které z mého pohledu celý
  tento systém má.
</p>

<p>
  <b>Úmluva: </b>V následujícím textu budu celý systém ohledně TeXu, LaTeXu a
  souvisejících komponent označovat jako „TeX“.
</p>

<h2 class="highlight">Co dělá LaTeX skvělým</h2>

<p>
  Nejprve však; co je na tomto systému tak dobré? Tak zaprvné se jedná o
  transparentní <b>open-source</b> systém. Nic není proprietárního, dokumenty
  samotné se píší do <b>plaintext</b>ových souborů s příponou <code>.tex</code>.
  To zajišťuje interoperabilitu s dalšímy systémy. Obsah nepodléhá TeXu.
  Uživatel s ním může nakládat jak chce a nedostane se mu žádných obfuskací.
</p>

<p>
  Další faktor vychází přímo z mantry TeXu. Nejedná se totiž o hloupý textový
  editor. V textovém editoru jako Microsoft Word dochází totiž k jakési fúzi
  mezi vzhledem a obsahem dokumentu. To má za důsledek, že při psaní obsahu se
  uživatel musí neustále zaobírat vzhledem a náležitě formátovat. Nastane
  obzvláště peklo v případě, že si jasně nerozmyslel všechny potřebné styly na
  začátku a náležitě je nenastavil.
</p>

<p>
  TeX je jiný. <b>Obsah a vzhled jsou diametrálně odlišné</b> komponenty,
  přičemž vzhled jde do pozadí a obsah do popředí.
</p>

<p>Jakási šablona dokumentu může vypadat následovně:</p>

<pre><code class="hljs language-latex">\documentclass{article} % preset pro typ dokumentu

% importování balíčků

% nastavování stylů

% další parametry dokumentu

\begin{document}

% obsah dokumentu

\end{document}
</code></pre>

<p>A demonstrativní příklad by mohl vypadat následovně:</p>

<pre><code class="hljs language-latex">\documentclass{article} % preset pro typ dokumentu

% ====================
% importování balíčků

\usepackage{geometry}

\usepackage[utf8]{inputenc} % podpora pro
\usepackage[czech]{babel} % čeština

% ====================
% nastavování stylů

% makro z balíčku `geometry`
% nastaví příslušná odsazení od okrajů stránky
\geometry{
top=1in,
bottom=1.5in,
left=1.25in,
right=1.25in
}

\setlength{\parindent}{0mm} % odsazení 1. řádku odstavců
\setlength{\parskip}{6pt} % mezera mezi odstavci

\title{Můj první dokument v \LaTeX-u}
\author{Marek Smolík}

\begin{document}

\maketitle

Tohle je nějaký pěkný dostatečně dlouhý odstavec vhodný pro demonstraci odstavců. Zalomuje se na více řádků, aby bylo
vidět, jak se chová. Ve výchozím nastavení má první odstavec v sekci větší otsazení prvního řádu, to můžeme vypnout
pomocí \texttt{parindent}.

Tohle je v pořadí druhý odstavec. Odstavce jsou vždy odděleny prázdnou řádkou. Pokud bych je třeba chtěl hned vedle
sebe, nastavil bych \texttt{parskip} na 0.

\end{document}
</code></pre>

<p>
  Tento útržek by zkompilovaný do PDF dal následující výsledek:<br />
  <img src="/media/__latex_doku.png" />
</p>

<p>
  Jak je vidět, není potřeba se vůbec soustředit na vzhled – ten není v
  nejmenším případě důležitý. Soustředím se na obsah. V momentě, kdy chci vzhled
  přizpůsobit, zkrátka si pohraji trochu s čísli v hlavičce dokumentu a mám
  hotovo. Styl je tak krásně
  <strong>deklarativní</strong>.
</p>

<p>
  S tím úzce souvisí také fakt, že dané dokumenty budou vypadat vždy úplně
  stejně, není potřeba se piplat s různými verzemi příslušného programu a bát
  se, že když otevřu dokument v jiné verzi, tak se mi všechno „rozsype“. Mohli
  bychom říci, že je celý systém
  <strong>reprodukovatelný</strong>.
</p>

<p>
  Tato konstelace dělá celý systém celkem
  <strong>robustní</strong> a <strong>spolehlivý</strong>.
</p>

<h2 class="highlight" data-heading="Co dělá LaTeX né zas tak skvělým" id="Co_dělá_LaTeX_né_zas_tak_skvělým">
  Co dělá LaTeX né zas tak skvělým
</h2>

<p>
  Jak již bylo naznačeno, tento stařičký systém má své vrtochy, které z dnešního
  pohledu mohou činit potíže a pokud by se dokázaly odbourat, byl by výsledný
  systém
  <em>skutečně perfektní</em>.
</p>

<h3 class="highlight-alt" data-heading="Těžkopádnost instalace a nepřehlednost systémů"
  id="Těžkopádnost_instalace_a_nepřehlednost_systémů">
  Těžkopádnost instalace a nepřehlednost systémů
</h3>

<p>
  Nejen že uživatel tahá do souborů externí balíčky (makra), ale
  <em>vše</em> je z těchto maker. Takový systém si nelze spravovat sám, a tak
  existují správci lokálních instalací. Nejrozšířenější jsou
  <a class="ref" data-tooltip-position="top" aria-label="https://miktex.org/" rel="noopener" class="external-link"
    href="https://miktex.org/" target="_blank">MiKTeX</a>
  a
  <a class="ref" data-tooltip-position="top" aria-label="https://www.tug.org/texlive" rel="noopener"
    class="external-link" href="https://www.tug.org/texlive" target="_blank">TeX Live</a>.
</p>

<p>
  Ať už si zvolíte kterýkoliv, výsledek bude přebloatění souborového systému
  minimálně vysokými stovkami MB. Posléze stačí pár externích balíčků a celá
  instalace znatelně nabobtná. Navíc příslušné balíčky, které nejsou lokální
  přístupné se musí nuceně v GUI pitomě hledat.
</p>

<p>
  Nutno podotknout, že tohle řeší např. projekt
  <a class="ref" data-tooltip-position="top" aria-label="https://tectonic-typesetting.github.io/en-US/" rel="noopener"
    class="external-link" href="https://tectonic-typesetting.github.io/en-US/" target="_blank">tectonic</a>. Ten natáhne
  jen skutečné minimum a poté až při generování nového souboru
  stáhne vše potřebné.
</p>

<h3 class="highlight-alt" data-heading="Pomalý překlad" id="Pomalý_překlad">Pomalý překlad</h3>

<p>
  Právě s překladem souboru do výstupního formátu (jako PDF) je velký problém.
  Překlad je strašně pomalý. Pro menší dokumenty to není veliký problém, ale
  když převýší počet přibližně 20, již nastane problém. Obzvláště pokud člověk
  použije nějaký balíček jako
  <a class="ref" data-tooltip-position="top" aria-label="https://www.overleaf.com/learn/latex/TikZ_package"
    rel="noopener" class="external-link" href="https://www.overleaf.com/learn/latex/TikZ_package"
    target="_blank">TikZ</a>
  pro generování různých grafik, je po ptákách.
</p>

<p>
  Generování zabere i na moderních sytémech klidně i nad deset sekund.
  Anekdotický scénář je, že má člověk chybu (invalidní syntax) v rovnici. Chybu
  „opraví“, rekompiluje a čeká… a čeká… a chyba překladu. A začíná to nanovo.
</p>

<ul class="cute-border">
  <li data-line="0">
    Jedno řešení je <strong>multi-threading</strong>. Ale....... TeX je
    single-threaded. To nevypadá jako dobrá cesta bez kompletního reworku.<br />
  </li>
  <li data-line="2">
    Alternativní nápad by byl překladač, který by byl dosti inteligentní na to,
    aby
    <strong>cachoval části dokumentu</strong> a při každé rekompilaci
    kontroloval komponenty, které se změnily a musí tak být znovu vygenerovány.
    Tyto částečky by byly slepeny a vytvořili by tak dokument o dost rychleji. V
    extrémním případě by to mohlo vypadat jako v
    <a class="ref" data-tooltip-position="top" aria-label="https://obsidian.md/" rel="noopener" class="external-link"
      href="https://obsidian.md/" target="_blank">Obsidianu</a>: <img src="/media/__latex_obsidian.webp" </li>
  <li data-line="3">
    Ještě k tomu syntaxu. Nebylo by od škody mít
    <strong>LSP</strong> (Language Server Protocol), který by šlo rozumně
    integrovat do libovolného IDE bez potřeby zahájit překlad pro identifikování
    chyb.
  </li>
</ul>

<p>
  Toto jsou ale jen pouhá zbožná přání. Osobně si nejsem vědom jakýchkoliv
  projektů, které by některé z těchto věcí implementovaly.
</p>

<h3 class="highlight-alt" data-heading="Špinavý syntax" id="Špinavý_syntax">Špinavý syntax</h3>

<p>
  Syntax TeXu je otřesný. Všude přebývají znaky, které tam nemusí být. V tomto
  ohledu by mohlo dojít inspiraci
  <a class="ref" data-tooltip-position="top" aria-label="https://www.markdownguide.org/basic-syntax/" rel="noopener"
    class="external-link" href="https://www.markdownguide.org/basic-syntax/" target="_blank">Markdownem</a>. Například v
  členění dokumentu bychom psali v TeXu:
</p>

<pre><code class="hljs language-latex">\section{Kalkul}
\subsection{Integrální počet}
\subsubsection{Určité integrály}
</code></pre>

<p>To je otřes. Alternativa v TeXu:</p>

<pre><code class="hljs language-markdown"># Kalkul
## Integrální počet
### Určité integrály
</code></pre>

<p>Rychlé a přehledné. Krása střídá nádheru. Některá další srovnání:</p>

<pre><code class="hljs language-plaintext">\textbf{tučný} --- **tučný**
\textit{kurzivní} --- *kurzivní*
\texttt{neproporciální} --- `neproporciální`
</code></pre>

<h2 class="highlight" data-heading="Jak se s tím vypořádat?" id="Jak_se_s_tím_vypořádat?">
  Jak se s tím vypořádat?
</h2>

<p>
  Nepřijde mi, že se tento problém někam hýbe a setrvává
  <em>status quo</em>.
</p>

<p>
  Osobně nejsem obecně největším fanouškem masivních IDE. Proto zde naznačím
  několik workflows, které se mi osvědčili.
</p>

<p>
  První potřebou je použít nějaký expander textu, minimálně pro rovnice. Každý,
  kdo píše v TeXu rovnice určitě pozná ten pocit, když musí napsat kopu kódu pro
  určité objekty – třeba matice (nebo automatický škálované závorky; což
  absolutně nechápu, že není výchozí chování). Psát:
</p>

<pre><code class="hljs language-latex">\begin{pmatrix}
x & y & 1
\end{pmatrix}\begin{pmatrix}
a_{11} & a_{12} & a_{13} \\
a_{12} & a_{22} & a_{23} \\
a_{13} & a_{23} & a_{33} \\
\end{pmatrix}\begin{pmatrix}
x \\ y \\ 1
\end{pmatrix}=0
</code></pre>

<p>
  je opravdu na nic. Vypisovat jak opička každou matici. Co kdyby člověk napsal
  něco jako <code>pmat</code>, a automaticky by se mu vypsalo:
</p>

<pre><code class="hljs language-latex">\begin{pmatrix}

\end{pmatrix}
</code></pre>

<p>To by bylo super.</p>

<p>
  Pokud děláte v nějakém editoru, který pro toto nemá podporu, doporučil bych
  <a class="ref" data-tooltip-position="top" aria-label="https://espanso.org/" rel="noopener" class="external-link"
    href="https://espanso.org/" target="_blank">espanso</a>. Jedná se o expander textu, který já osobně používám pro
  různé jiné věci
  jako speciální znaky. Je to vysoce konfigurovatelný program a člověk může
  třeba i použít Regex.
</p>

<p>
  Já osobně většinu svých technických/matematických poznámek píši v již zmíněném
  poznámkovém programu Obsidian. Jeho workflow spočívá ve tvoření plaintextových
  .md souborů, které se nazvájem dají propojovat. V těchto souborech lze použít
  TeXovský syntax na rovnice. Zároveň je tento program velice rozšiřitelný
  komunitními pluginy. Jeden z nich je
  <a class="ref" data-tooltip-position="top" aria-label="https://github.com/artisticat1/obsidian-latex-suite"
    rel="noopener" class="external-link" href="https://github.com/artisticat1/obsidian-latex-suite"
    target="_blank">Latex Suite</a>, ve
  kterém si člověk může nadefinovat tyto zkratky pomocí JSONového souboru.
  Například výše zmíněný problém s psaním matic lze vyřešit následujícím řádkem
  v konfigu:
</p>

<pre><code class="hljs language-json">{trigger: "pmat", replacement: "\\begin{pmatrix}\n$0\n\\end{pmatrix}$1", options: "MA"}
</code></pre>

<p>Zde:</p>
<ul class="cute-border">
  <li data-line="0">
    <code>trigger</code> určuje posloupnost znaků, při které by se měla expanze
    aktivovat
  </li>
  <li data-line="1">
    <code>options</code> udává mód, v jakém kontextu je zkratka aktivní (v tomto
    případě v kontextu matematickém)
  </li>
  <li data-line="2">
    <code>replacement</code> udává čím se má zkratka přepsat
    <ul>
      <li data-line="3">zde musí být <code>\</code> „escapenuté“</li>
      <li data-line="4">
        <code>$&lt;číslo&gt;</code> udává tabulátorové pořadí po expanzi
        <ul>
          <li data-line="5">po expanzi se kurzor umístí na <code>$0</code></li>
          <li data-line="6">
            po <code>n</code>-tém stisknutí &lt;TAB&gt; se kurzor posune na <code>$n</code>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>Ještě jedna lahůdka:</p>

<pre><code class="hljs language-json">{trigger: "([a-zA-Z])vec", replacement: "\\vec{[[0]]}", options: "rmA"}</code></pre>

<p>
  Takto nemusí člověk psát otravné <code>\vec{x}+\vec{y}…</code>, stačí pouze
  <code>xvec + yvec…</code>.
</p>

<p>
  Pokud se ukáže nutnost daný dokument napsaný v Obsidianu pořádně typograficky
  vyexportovat (Obsidian má nativní export do PDF, ale tato feature je docela
  špatná a těžce záleží na současně nastavené theme), lze tento plaintext
  markdown dokument použitím programu
  <a class="ref" data-tooltip-position="top" aria-label="https://pandoc.org/" rel="noopener" class="external-link"
    href="https://pandoc.org/" target="_blank">pandoc</a>
  převést do TeXu, a pak si s výsledkem náležitě pohrát dle požadovaného
  výsledku.
</p>

<p><strong>Koniec.</strong></p>